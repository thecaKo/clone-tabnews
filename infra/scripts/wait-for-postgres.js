const { exec } = require("node:child_process");

function checkPostgres() {

    exec("sudo docker exec postgres-dev pg_isready --host localhost", handleReturn);

    function handleReturn(error, stdout) {
        if (stdout.search("accepting connections") === -1 ) {
            process.stdout.write(".");
            checkPostgres();
            return;
        }
        console.log("\n\nðŸŸ¢ Postgres estÃ¡ pronto para conexÃµes.");
    }
   
}
process.stdout.write("\nðŸ”´ Aguardando Postgres aceitar as conexÃµes.");
checkPostgres();
